<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Liste des trains</title>
<style>
  body { font-family: Arial, sans-serif; background: #111; color: #eee; }
  .train-list { max-width: 600px; margin: 2em auto; }
  .train-item { padding: 10px; border-bottom: 1px solid #444; cursor: pointer; }
  .train-item:hover { background: #222; }
  .details { background: #222; padding: 15px; margin-top: 1em; border-radius: 5px; }
  .details h2 { margin-top: 0; }
</style>
</head>
<body>

<div class="train-list" id="trainList">
  <h1>Liste des trains</h1>
  <!-- Les trains seront insérés ici -->
</div>

<div class="details" id="trainDetails" style="display:none;">
  <h2>Détails du train</h2>
  <div id="detailsContent"></div>
</div>

<script>
// Exemple simplifié de données (à remplacer par ta vraie réponse JSON)
const trains = [
  {
    trip_short_name: "86563",
    arrival_date_time: "20250611T135700",
    departure_date_time: "20250611T130000",
    route_name: "K59",
    physical_mode: "TER / Intercités",
    origin: { name: "Nancy" },
    terminus: { name: "Luxembourg" },
    headsign: "86563"
  },
  {
    trip_short_name: "88767",
    arrival_date_time: "20250611T140000",
    departure_date_time: "20250611T133000",
    route_name: "K62",
    physical_mode: "TER / Intercités",
    origin: { name: "Metz" },
    terminus: { name: "Luxembourg" },
    headsign: "88767"
  }
];

// Fonction pour formater la date "YYYYMMDDTHHMMSS" en "HH:MM"
function formatTime(dateTime) {
  const h = dateTime.substr(9,2);
  const m = dateTime.substr(11,2);
  return `${h}:${m}`;
}

function afficherListe() {
  const listDiv = document.getElementById('trainList');
  
  trains.forEach((train, index) => {
    const div = document.createElement('div');
    div.className = 'train-item';
    div.textContent = `Train n°${train.trip_short_name} - Arrivée : ${formatTime(train.arrival_date_time)}`;
    div.addEventListener('click', () => afficherDetails(index));
    listDiv.appendChild(div);
  });
}

function afficherDetails(index) {
  const train = trains[index];
  const detailsDiv = document.getElementById('trainDetails');
  const contentDiv = document.getElementById('detailsContent');
  
  contentDiv.innerHTML = `
    <p><strong>Numéro de train :</strong> ${train.trip_short_name}</p>
    <p><strong>Ligne :</strong> ${train.route_name}</p>
    <p><strong>Mode :</strong> ${train.physical_mode}</p>
    <p><strong>Gare d'origine :</strong> ${train.origin.name}</p>
    <p><strong>Gare terminus :</strong> ${train.terminus.name}</p>
    <p><strong>Heure de départ :</strong> ${formatTime(train.departure_date_time)}</p>
    <p><strong>Heure d'arrivée :</strong> ${formatTime(train.arrival_date_time)}</p>
  `;
  
  detailsDiv.style.display = 'block';
}

// Initialisation
afficherListe();

</script>

</body>
</html>
