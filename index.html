<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Horaires des Trains</title>
</head>
<body>
  <h1>Horaires des Trains Metz → Thionville</h1>
  <button onclick="getTrains()">Afficher les horaires</button>
  <ul id="resultats"></ul>

  <script>
    async function getTrains() {
      const url = "https://api.sncf.com/v1/coverage/sncf/journeys?from=stop_area:OCE:SA:8719200&to=stop_area:OCE:SA:8719210&datetime=20250425T150000&duration=7200";
      const response = await fetch(url, {
        headers: {
          "Authorization": "Basic " + btoa("242fac11-6d98-45fb-93df-28174d362447:")
        }
      });

      const data = await response.json();
      const list = document.getElementById("resultats");
      list.innerHTML = "";

      if (data.journeys && data.journeys.length > 0) {
        data.journeys.forEach(journey => {
          const departure = new Date(journey.departure_date_time);
          const arrival = new Date(journey.arrival_date_time);
          const li = document.createElement("li");
          li.textContent = `Départ: ${departure.toLocaleTimeString()} → Arrivée: ${arrival.toLocaleTimeString()}`;
          list.appendChild(li);
        });
      } else {
        list.innerHTML = "<li>Aucun train trouvé.</li>";
      }
    }
  </script>
</body>
</html>
