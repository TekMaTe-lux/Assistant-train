<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations Train</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Informations sur le train 88532</h1>
    <button id="getTrainData">Obtenir les données du train</button>
    <div id="trainInfo"></div>

    <script>
        $(document).ready(function() {
            $('#getTrainData').click(function() {
                var trainNumber = '88532';
                var apiKey = '242fac11-6d98-45fb-93df-28174d362447';
                var url = 'https://api.sncf.com/v1/coverage/sncf/vehicle_journeys/vehicle_journey:SNCF:2025-05-14:' + trainNumber + ':1187:Train';
                
                $.ajax({
                    url: url,
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer ' + apiKey
                    },
                    success: function(response) {
                        if(response.vehicle_journeys && response.vehicle_journeys.length > 0) {
                            var train = response.vehicle_journeys[0];
                            var stopTimes = train.stop_times.map(function(stop) {
                                return '<p>' + stop.stop_point.name + ' - Arrivée: ' + stop.arrival_time + ' - Départ: ' + stop.departure_time + '</p>';
                            }).join('');
                            $('#trainInfo').html('<h2>Arrêts du train ' + train.name + ':</h2>' + stopTimes);
                        } else {
                            $('#trainInfo').html('<p>Aucune donnée disponible pour ce train.</p>');
                        }
                    },
                    error: function() {
                        $('#trainInfo').html('<p>Erreur lors de la récupération des données.</p>');
                    }
                });
            });
        });
    </script>
</body>
</html>
