<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Chat avec le contr√¥leur</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
      max-width: 900px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #004080;
      font-size: 2.5em;
    }
    .chatbox {
      margin-top: 40px;
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .chatlog {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 10px;
      animation: fadeIn 1s ease-in-out;
    }
    .chatlog .msg {
      padding: 8px 12px;
      border-radius: 15px;
      margin-bottom: 8px;
      display: inline-block;
      max-width: 80%;
      clear: both;
      animation: slideIn 1s ease-in-out;
    }
    .chatlog .user {
      background: #dcf8c6;
      float: right;
    }
    .chatlog .bot {
      background: #f1f0f0;
      float: left;
    }
    .chatinput {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .chatinput input {
      flex: 1;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .chatinput button {
      padding: 10px 20px;
      border: none;
      background: #004080;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .chatinput button:hover {
      background: #003366;
    }

    /* Animation for chat messages */
    @keyframes slideIn {
      0% { opacity: 0; transform: translateX(100%); }
      100% { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    /* Animation for typing effect */
    .typing .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      margin: 0 3px;
      border-radius: 50%;
      background-color: #004080;
      animation: dot-blink 1s infinite;
    }
    .typing .dot:nth-child(1) {
      animation-delay: 0s;
    }
    .typing .dot:nth-child(2) {
      animation-delay: 0.3s;
    }
    .typing .dot:nth-child(3) {
      animation-delay: 0.6s;
    }

    @keyframes dot-blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>üí¨ Chat avec le contr√¥leur</h1>

  <div class="chatbox">
    <div class="chatlog" id="chatlog"></div>
    <div class="chatinput">
      <input type="text" id="pseudoInput" placeholder="Entrez votre pseudo...">
      <input type="text" id="userInput" placeholder="Pose une question...">
      <button onclick="sendMessage()">Envoyer</button>
    </div>
  </div>

  <script>
    // Liste des phrases du bot
    const phrasesBot = [
      { motsCles: ["bonjour"], reponse: "Salut ! Bienvenue dans l'univers parall√®le des retards o√π chaque minute est un √©ternel retour." },
      { motsCles: ["retard"], reponse: "Ah, un retard... Encore une petite surprise de notre ch√®re SNCF. C‚Äôest comme un cadeau, mais sans le papier." },
      { motsCles: ["gr√®ve"], reponse: "Gr√®ve ? Vous avez choisi la bonne journ√©e pour tenter votre chance ! Prenez un caf√©, √ßa pourrait prendre un moment." },
      { motsCles: ["panne"], reponse: "Une panne ? Non, juste une petite pause pour que le train reprenne des forces. Vous savez, comme une sieste." },
      { motsCles: ["annul√©"], reponse: "Annul√© ? Ah, la magie du TER ! Vous y croyez ? Nous non plus..." },
      { motsCles: ["retard√©"], reponse: "Retard√©, encore ! Mais ne vous inqui√©tez pas, c‚Äôest juste notre fa√ßon de prolonger un peu plus cette exp√©rience." },
      { motsCles: ["sncf"], reponse: "SNCF : Syndrome Nocturne du Chaos Ferroviaire. Quand le train est une aventure, chaque d√©part est un myst√®re." },
      { motsCles: ["vacances"], reponse: "Ah, les vacances... Juste un petit d√©tail : le train ne suit pas le m√™me calendrier !" },
      { motsCles: ["m√©t√©o", "pluie"], reponse: "Pluie, vent, neige‚Ä¶ Un peu de tout ! Le TER aime l‚Äôaventure, m√™me sous des trombes d‚Äôeau." },
      { motsCles: ["travaux"], reponse: "Les travaux, c‚Äôest un peu comme la m√©t√©o : impr√©visibles, mais souvent pr√©sents pour pimenter votre journ√©e." },
      { motsCles: ["transports en commun"], reponse: "Transports en commun : une chance pour rencontrer de nouveaux amis‚Ä¶ ou d√©couvrir des visages familiers ! üòÖ" },
      { motsCles: ["accident"], reponse: "Accident ? Non, juste un petit d√©tour pour faire d√©couvrir des paysages impr√©vus." },
      { motsCles: ["personne sous les roues"], reponse: "C‚Äôest une situation tragique, mais parfois, le train a besoin de r√©fl√©chir √† sa direction. Une pause pour l'√¢me." },
      { motsCles: ["ter", "train"], reponse: "Le TER, Toujours En Retard. Mais au moins, c‚Äôest un train qui ne vous laisse jamais de c√¥t√© !" },
      { motsCles: ["panne de signalisation"], reponse: "Panne de signalisation ? Le train aime garder son myst√®re... Vous ne devinerez jamais quand il arrivera !" },
      { motsCles: ["escalator", "ascenseur"], reponse: "Ah, les ascenseurs en panne, comme un voyage dans le temps : retour √† l'√©poque o√π les escaliers √©taient notre seul ami !" },
      { motsCles: ["billet", "r√©servation"], reponse: "Votre billet ? Ah, c‚Äôest aussi myst√©rieux que l‚Äôheure d‚Äôarriv√©e de votre train. Mais rassurez-vous, il arrivera !" },
      { motsCles: ["contact", "information"], reponse: "Chercher des informations ? C‚Äôest comme chercher un tr√®fle √† quatre feuilles, mais avec un peu de patience, tout arrive." },
      { motsCles: ["horaires"], reponse: "Les horaires ? C‚Äôest un peu comme une promesse dans un livre d‚Äôaventures : parfois, ils sont l√†, parfois non." },
      { motsCles: ["caf√©"], reponse: "Un caf√© ? Tr√®s bonne id√©e ! Vous aurez le temps d‚Äôen boire 10 avant que le train ne daigne arriver !" },
      { motsCles: ["confusion"], reponse: "Confusion ? Non, juste une petite √©tape vers l‚Äôillumination de votre voyage !" },
      { motsCles: ["gr√®ves", "manifestation"], reponse: "Gr√®ve et manifestation ? La SNCF transforme chaque jour en une pi√®ce de th√©√¢tre, avec un grand suspens." },
      { motsCles: ["r√©servation", "place"], reponse: "R√©server une place ? Pourquoi faire ? Ce train vous r√©serve de grandes surprises !" },
      { motsCles: ["mauvais temps", "temp√™te"], reponse: "Temp√™te, pluie, neige‚Ä¶ Ce train traverse tout √ßa comme un vaillant chevalier !" },
      { motsCles: ["bilan"], reponse: "Le bilan ? Bien s√ªr, il y a des retards, des gr√®ves, mais au final, vous √™tes toujours l√† √† attendre avec nous !" },

      // R√©pliques sur les excuses de retard sur la ligne Nancy-Metz-Luxembourg :
      { motsCles: [], reponse: "Le train est en retard ? Peut-√™tre qu‚Äôil cherche son chemin comme nous dans ces travaux incessants..." },
      { motsCles: [], reponse: "Des retards √† cause des travaux ? Non, pas de surprise ici. C‚Äôest notre petite touche sp√©ciale : le charme des lignes en construction !" },
      { motsCles: [], reponse: "Ce n‚Äôest pas un retard, c‚Äôest une opportunit√© de profiter encore un peu de la vue, non ?" },
      { motsCles: [], reponse: "Si vous ne pouvez pas attendre plus longtemps, peut-√™tre que le train attend que vous fassiez un v≈ìu avant de repartir." },
      { motsCles: [], reponse: "Ah, ce bon vieux retard‚Ä¶ Parfois c‚Äôest une vraie aventure ! Mais bon, mieux vaut √™tre patient comme un vieux sage." },
      { motsCles: [], reponse: "Vous avez cru que le train √©tait √† l'heure ? C‚Äôest bien tent√©, mais non, il pr√©f√®re faire durer le suspense." },
      { motsCles: [], reponse: "Les rails sont s√ªrement en pleine r√©flexion‚Ä¶ Nous aussi, on attend !" },
      { motsCles: [], reponse: "Ah, vous avez fait connaissance avec notre ami le retard ! C‚Äôest un peu notre mascotte, vous savez." },
      { motsCles: [], reponse: "Ce retard ? Un petit cadeau du destin. Ne vous inqui√©tez pas, vous aurez bient√¥t une arriv√©e surprise !" },
      { motsCles: [], reponse: "Quand un train est en retard, c‚Äôest parce qu‚Äôil a trouv√© un tr√©sor √† d√©couvrir sur la voie. Un peu de patience !" },

      // Insultes m√©di√©vales pour ajouter du piquant
      { motsCles: ["imb√©cile", "sot", "√¢ne"], reponse: "Oh, vous avez l‚Äôesprit aussi aiguis√© qu‚Äôun paysan devant sa charrue. Tenez, un retard pour vous." },
      { motsCles: ["bafouin", "coquin", "goujat"], reponse: "Eh bien, vous n'√™tes pas plus sage qu'un cochon dans un champ de tr√®fles !" },
      { motsCles: ["bigleux", "muet"], reponse: "Vous cherchez votre train ? Il semble qu'il vous ait √©chapp√©, comme un chat furtif dans la nuit." },
      { motsCles: ["vilain", "gueux"], reponse: "Ah, un gueux perdu dans le monde moderne ! Trouvez donc un cheval, ce train ne vous attendra pas !" },
      { motsCles: ["salamandre", "d√©mone"], reponse: "S‚Äôil vous pla√Æt, revenez dans le monde des vivants et laissez le train faire son chemin." }
    ];

    // Fonction pour envoyer un message
    function sendMessage() {
      const pseudoInput = document.getElementById("pseudoInput").value;
      const userInput = document.getElementById("userInput").value;
      const chatlog = document.getElementById("chatlog");

      if (!pseudoInput) {
        alert("Veuillez entrer un pseudo !");
        return;
      }

      const userMsg = document.createElement("div");
      userMsg.classList.add("msg", "user");
      userMsg.textContent = pseudoInput + " : " + userInput;
      chatlog.appendChild(userMsg);

      // Effet d'apparition du message
      setTimeout(() => {
        chatlog.scrollTop = chatlog.scrollHeight;
      }, 300);

      // R√©ponse du bot avec d√©lai
      setTimeout(() => {
        let botResponse = "D√©sol√©, je n'ai pas compris.";
        phrasesBot.forEach(phrase => {
          if (userInput.toLowerCase().includes(phrase.motsCles[0])) {
            botResponse = phrase.reponse;
          }
        });

        // Si aucune correspondance n'est trouv√©e, r√©pondre par une phrase g√©n√©rique
        if (!botResponse) {
          botResponse = phrasesBot[Math.floor(Math.random() * phrasesBot.length)].reponse;
        }

        // Affichage de la r√©ponse du bot
        const botMsg = document.createElement("div");
        botMsg.classList.add("msg", "bot");
        botMsg.innerHTML = "Contr√¥leur : " + botResponse;
        chatlog.appendChild(botMsg);
        
        // Effet d'apparition du message du bot
        setTimeout(() => {
          chatlog.scrollTop = chatlog.scrollHeight;
        }, 300);
      }, 1000);  // D√©lai pour simuler la r√©ponse du bot

      // Effet de "tape-tape" (dots)
      const typingDiv = document.createElement("div");
      typingDiv.classList.add("typing");
      typingDiv.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      chatlog.appendChild(typingDiv);

      // Suppression des points apr√®s un d√©lai
      setTimeout(() => {
        typingDiv.remove();
      }, 2000);
    }
  </script>
</body>
</html>
