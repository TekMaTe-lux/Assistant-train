<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Chat avec le contrÃ´leur</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      padding: 20px;
      background-color: #f9f9f9;
      color: #333;
      max-width: 900px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #004080;
      font-size: 2.5em;
    }
    .chatbox {
      margin-top: 40px;
      background: #fff;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .chatlog {
      max-height: 300px;
      overflow-y: auto;
      margin-bottom: 10px;
      animation: fadeIn 1s ease-in-out;
    }
    .chatlog .msg {
      padding: 8px 12px;
      border-radius: 15px;
      margin-bottom: 8px;
      display: inline-block;
      max-width: 80%;
      clear: both;
      animation: slideIn 1s ease-in-out;
    }
    .chatlog .user {
      background: #dcf8c6;
      float: right;
    }
    .chatlog .bot {
      background: #f1f0f0;
      float: left;
    }
    .chatinput {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .chatinput input {
      flex: 1;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .chatinput button {
      padding: 10px 20px;
      border: none;
      background: #004080;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .chatinput button:hover {
      background: #003366;
    }

    /* Animation for chat messages */
    @keyframes slideIn {
      0% { opacity: 0; transform: translateX(100%); }
      100% { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeIn {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    /* Animation for typing effect */
    .typing .dot {
      display: inline-block;
      width: 8px;
      height: 8px;
      margin: 0 3px;
      border-radius: 50%;
      background-color: #004080;
      animation: dot-blink 1s infinite;
    }
    .typing .dot:nth-child(1) {
      animation-delay: 0s;
    }
    .typing .dot:nth-child(2) {
      animation-delay: 0.3s;
    }
    .typing .dot:nth-child(3) {
      animation-delay: 0.6s;
    }

    @keyframes dot-blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body>
  <h1>ðŸ’¬ Chat avec le contrÃ´leur</h1>

  <div class="chatbox">
    <div class="chatlog" id="chatlog"></div>
    <div class="chatinput">
      <input type="text" id="pseudoInput" placeholder="Entrez votre pseudo...">
      <input type="text" id="userInput" placeholder="Pose une question...">
      <button onclick="sendMessage()">Envoyer</button>
    </div>
  </div>

  <script>
    // Liste des phrases du bot
    const phrasesBot = [
      { motsCles: ["bonjour"], reponse: "Salut ! Bienvenue dans l'univers parallÃ¨le des retards oÃ¹ chaque minute est un Ã©ternel retour." },
      { motsCles: ["retard"], reponse: "Ah, un retard... Encore une petite surprise de notre chÃ¨re SNCF. Câ€™est comme un cadeau, mais sans le papier." },
      { motsCles: ["grÃ¨ve"], reponse: "GrÃ¨ve ? Vous avez choisi la bonne journÃ©e pour tenter votre chance ! Prenez un cafÃ©, Ã§a pourrait prendre un moment." },
      { motsCles: ["panne"], reponse: "Une panne ? Non, juste une petite pause pour que le train reprenne des forces. Vous savez, comme une sieste." },
      { motsCles: ["annulÃ©"], reponse: "AnnulÃ© ? Ah, la magie du TER ! Vous y croyez ? Nous non plus..." },
      { motsCles: ["retardÃ©"], reponse: "RetardÃ©, encore ! Mais ne vous inquiÃ©tez pas, câ€™est juste notre faÃ§on de prolonger un peu plus cette expÃ©rience." },
      { motsCles: ["sncf"], reponse: "SNCF : Syndrome Nocturne du Chaos Ferroviaire. Quand le train est une aventure, chaque dÃ©part est un mystÃ¨re." },
      { motsCles: ["vacances"], reponse: "Ah, les vacances... Juste un petit dÃ©tail : le train ne suit pas le mÃªme calendrier !" },
      { motsCles: ["mÃ©tÃ©o", "pluie"], reponse: "Pluie, vent, neigeâ€¦ Un peu de tout ! Le TER aime lâ€™aventure, mÃªme sous des trombes dâ€™eau." },
      { motsCles: ["travaux"], reponse: "Les travaux, câ€™est un peu comme la mÃ©tÃ©o : imprÃ©visibles, mais souvent prÃ©sents pour pimenter votre journÃ©e." },
      { motsCles: ["transports en commun"], reponse: "Transports en commun : une chance pour rencontrer de nouveaux amisâ€¦ ou dÃ©couvrir des visages familiers ! ðŸ˜…" },
      { motsCles: ["accident"], reponse: "Accident ? Non, juste un petit dÃ©tour pour faire dÃ©couvrir des paysages imprÃ©vus." },
      { motsCles: ["personne sous les roues"], reponse: "Câ€™est une situation tragique, mais parfois, le train a besoin de rÃ©flÃ©chir Ã  sa direction. Une pause pour l'Ã¢me." },
      { motsCles: ["ter", "train"], reponse: "Le TER, Toujours En Retard. Mais au moins, câ€™est un train qui ne vous laisse jamais de cÃ´tÃ© !" },
      { motsCles: ["panne de signalisation"], reponse: "Panne de signalisation ? Le train aime garder son mystÃ¨re... Vous ne devinerez jamais quand il arrivera !" },
      { motsCles: ["escalator", "ascenseur"], reponse: "Ah, les ascenseurs en panne, comme un voyage dans le temps : retour Ã  l'Ã©poque oÃ¹ les escaliers Ã©taient notre seul ami !" },
      { motsCles: ["billet", "rÃ©servation"], reponse: "Votre billet ? Ah, câ€™est aussi mystÃ©rieux que lâ€™heure dâ€™arrivÃ©e de votre train. Mais rassurez-vous, il arrivera !" },
      { motsCles: ["contact", "information"], reponse: "Chercher des informations ? Câ€™est comme chercher un trÃ¨fle Ã  quatre feuilles, mais avec un peu de patience, tout arrive." },
      { motsCles: ["horaires"], reponse: "Les horaires ? Câ€™est un peu comme une promesse dans un livre dâ€™aventures : parfois, ils sont lÃ , parfois non." },
      { motsCles: ["cafÃ©"], reponse: "Un cafÃ© ? TrÃ¨s bonne idÃ©e ! Vous aurez le temps dâ€™en boire 10 avant que le train ne daigne arriver !" },
      { motsCles: ["confusion"], reponse: "Confusion ? Non, juste une petite Ã©tape vers lâ€™illumination de votre voyage !" },
      { motsCles: ["grÃ¨ves", "manifestation"], reponse: "GrÃ¨ve et manifestation ? La SNCF transforme chaque jour en une piÃ¨ce de thÃ©Ã¢tre, avec un grand suspens." },
      { motsCles: ["rÃ©servation", "place"], reponse: "RÃ©server une place ? Pourquoi faire ? Ce train vous rÃ©serve de grandes surprises !" },
      { motsCles: ["mauvais temps", "tempÃªte"], reponse: "TempÃªte, pluie, neigeâ€¦ Ce train traverse tout Ã§a comme un vaillant chevalier !" },
      { motsCles: ["bilan"], reponse: "Le bilan ? Bien sÃ»r, il y a des retards, des grÃ¨ves, mais au final, vous Ãªtes toujours lÃ  Ã  attendre avec nous !" },

      // RÃ©pliques sur les excuses de retard sur la ligne Nancy-Metz-Luxembourg :
      { motsCles: [], reponse: "Le train est en retard ? Peut-Ãªtre quâ€™il cherche son chemin comme nous dans ces travaux incessants..." },
      { motsCles: [], reponse: "Des retards Ã  cause des travaux ? Non, pas de surprise ici. Câ€™est notre petite touche spÃ©ciale : le charme des lignes en construction !" },
      { motsCles: [], reponse: "Ce nâ€™est pas un retard, câ€™est une opportunitÃ© de profiter encore un peu de la vue, non ?" },
      { motsCles: [], reponse: "Si vous ne pouvez pas attendre plus longtemps, peut-Ãªtre que le train attend que vous fassiez un vÅ“u avant de repartir." },
      { motsCles: [], reponse: "Ah, ce bon vieux retardâ€¦ Parfois câ€™est une vraie aventure ! Mais bon, mieux vaut Ãªtre patient comme un vieux sage." },
      { motsCles: [], reponse: "Vous avez cru que le train Ã©tait Ã  l'heure ? Câ€™est bien tentÃ©, mais non, il prÃ©fÃ¨re faire durer le suspense." },
      { motsCles: [], reponse: "Les rails sont sÃ»rement en pleine rÃ©flexionâ€¦ Nous aussi, on attend !" },
      { motsCles: [], reponse: "Ah, vous avez fait connaissance avec notre ami le retard ! Câ€™est un peu notre mascotte, vous savez." },
      { motsCles: [], reponse: "Ce retard ? Un petit cadeau du destin. Ne vous inquiÃ©tez pas, vous aurez bientÃ´t une arrivÃ©e surprise !" },
      { motsCles: [], reponse: "Quand un train est en retard, câ€™est parce quâ€™il a trouvÃ© un trÃ©sor Ã  dÃ©couvrir sur la voie. Un peu de patience !" },

      // Insultes mÃ©diÃ©vales pour ajouter du piquant
      { motsCles: ["imbÃ©cile", "sot", "Ã¢ne"], reponse: "Oh, vous avez lâ€™esprit aussi aiguisÃ© quâ€™un paysan devant sa charrue. Tenez, un retard pour vous." },
      { motsCles: ["bafouin", "coquin", "goujat"], reponse: "Eh bien, vous n'Ãªtes pas plus sage qu'un cochon dans un champ de trÃ¨fles !" },
      { motsCles: ["bigleux", "muet"], reponse: "Vous cherchez votre train ? Il semble qu'il vous ait Ã©chappÃ©, comme un chat furtif dans la nuit." },
      { motsCles: ["vilain", "gueux"], reponse: "Ah, un gueux perdu dans le monde moderne ! Trouvez donc un cheval, ce train ne vous attendra pas !" },
      { motsCles: ["salamandre", "dÃ©mone"], reponse: "Sâ€™il vous plaÃ®t, revenez dans le monde des vivants et laissez le train faire son chemin." }
    ];

    // Fonction pour envoyer un message
    function sendMessage() {
      const pseudoInput = document.getElementById("pseudoInput").value;
      const userInput = document.getElementById("userInput").value;
      const chatlog = document.getElementById("chatlog");

      if (!pseudoInput) {
        alert("Veuillez entrer un pseudo !");
        return;
      }

      const userMsg = document.createElement("div");
      userMsg.classList.add("msg", "user");
      userMsg.textContent = pseudoInput + " : " + userInput;
      chatlog.appendChild(userMsg);

      // Effet d'apparition du message
      setTimeout(() => {
        chatlog.scrollTop = chatlog.scrollHeight;
      }, 300);

      // RÃ©ponse du bot avec dÃ©lai
      setTimeout(() => {
        let botResponse = "DÃ©solÃ©, je n'ai pas compris.";
        phrasesBot.forEach(phrase => {
          if (userInput.toLowerCase().includes(phrase.motsCles[0])) {
            botResponse = phrase.reponse;
          }
        });

        // Si aucune correspondance n'est trouvÃ©e, rÃ©pondre par une phrase gÃ©nÃ©rique
        if (!botResponse) {
          botResponse = phrasesBot[Math.floor(Math.random() * phrasesBot.length)].reponse;
        }

        // Affichage de la rÃ©ponse du bot
        const botMsg = document.createElement("div");
        botMsg.classList.add("msg", "bot");
        botMsg.innerHTML = "ContrÃ´leur : " + botResponse;
        chatlog.appendChild(botMsg);
        
        // Effet d'apparition du message du bot
        setTimeout(() => {
          chatlog.scrollTop = chatlog.scrollHeight;
        }, 300);
      }, 1000);  // DÃ©lai pour simuler la rÃ©ponse du bot

      // Effet de "tape-tape" (dots)
      const typingDiv = document.createElement("div");
      typingDiv.classList.add("typing");
      typingDiv.innerHTML = '<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      chatlog.appendChild(typingDiv);

      // Suppression des points aprÃ¨s un dÃ©lai
      setTimeout(() => {
        typingDiv.remove();
      }, 2000);
    }
  </script>
</body>
</html>
