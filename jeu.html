<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Mini Pac-Train</title>
<style>
  body {
    background: #111;
    color: #0ff;
    font-family: 'Orbitron', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  #game {
    display: grid;
    grid-template-columns: repeat(10, 40px);
    grid-template-rows: repeat(10, 40px);
    gap: 2px;
  }
  .cell {
    width: 40px;
    height: 40px;
    background: #222;
    border: 1px solid #0ff;
    box-sizing: border-box;
  }
  .train {
    background: cyan;
  }
  .betail {
    background: yellow;
  }
  .retard {
    background: orange;
  }
  .suppression {
    background: red;
  }
</style>
</head>
<body>

<div id="game"></div>

<script>
  const game = document.getElementById('game');
  const width = 10;
  const height = 10;

  // grille avec types : 0 = vide, 1 = bétail, 2 = retard, 3 = suppression
  let grid = [
    0,0,0,0,0,0,0,3,0,0,
    0,1,0,0,0,0,2,0,0,0,
    0,0,0,0,1,0,0,0,0,0,
    0,0,2,0,0,0,0,0,3,0,
    0,0,0,0,0,1,0,0,0,0,
    0,3,0,0,0,0,0,2,0,0,
    0,0,0,1,0,0,0,0,0,0,
    0,0,0,0,0,0,3,0,0,0,
    0,0,2,0,0,0,0,0,1,0,
    0,0,0,0,0,0,0,0,0,0,
  ];

  let trainPos = 0;

  function drawGrid() {
    game.innerHTML = '';
    for(let i = 0; i < grid.length; i++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');

      if(i === trainPos) cell.classList.add('train');
      else if(grid[i] === 1) cell.classList.add('betail');
      else if(grid[i] === 2) cell.classList.add('retard');
      else if(grid[i] === 3) cell.classList.add('suppression');

      game.appendChild(cell);
    }
  }

  function moveTrain(dir) {
    let nextPos = trainPos;
    if(dir === 'ArrowUp' && trainPos >= width) nextPos -= width;
    else if(dir === 'ArrowDown' && trainPos < width*(height-1)) nextPos += width;
    else if(dir === 'ArrowLeft' && trainPos % width !== 0) nextPos -= 1;
    else if(dir === 'ArrowRight' && (trainPos % width) < width-1) nextPos += 1;

    // interdiction d'aller dans suppression (rouge)
    if(grid[nextPos] === 3) return;

    trainPos = nextPos;

    // ramasser bétail
    if(grid[trainPos] === 1) {
      grid[trainPos] = 0;
      console.log('Bétail collecté !');
    }

    drawGrid();
  }

  window.addEventListener('keydown', e => {
    if(['ArrowUp','ArrowDown','ArrowLeft','ArrowRight'].includes(e.key)) {
      e.preventDefault();
      moveTrain(e.key);
    }
  });

  drawGrid();
</script>

</body>
</html>
