
    const depTime = formatTime(parseSNCFDate(train.stop_date_time.departure_date_time));
    // const arrTime = formatTime(parseSNCFDate(train.stop_date_time.arrival_date_time));

    let html = `<h3>Train ${info.headsign || '???'}</h3>`;

const direction = info.direction || '';
if (direction && direction !== "undefined" && direction.trim() !== "") {
  html += `<p><strong>Destination :</strong> ${direction}</p>`;
}

html += `<p><strong>Départ :</strong> ${depTime}</p>`;
    // On supprime complètement l'affichage de l'arrivée estimée
    // html += `<p><strong>Arrivée estimée :</strong> ${arrTime}</p>`;

    card.innerHTML = html;

    card.addEventListener('click', () => {
      card.classList.toggle('selected');
      mettreAJourSelection();
    });

    container.appendChild(card);
  });

  document.getElementById('selectedTrains').innerHTML = '';
}

// Mise à jour de la zone sélection
function mettreAJourSelection() {
  const selected = [...document.querySelectorAll('.train-card.selected')];
  const container = document.getElementById('selectedTrains');
  if(selected.length === 0){
    container.innerHTML = '<p>Aucun train sélectionné.</p>';
    return;
  }
  let html = '<ul>';
  selected.forEach(card => {
    html += `<li>${card.dataset.train}</li>`;
  });
  html += '</ul>';
  container.innerHTML = html;
}

// Validation (exemple simple)
function validerSelection() {
  const selected = [...document.querySelectorAll('.train-card.selected')];
  if(selected.length === 0){
    alert('Veuillez sélectionner au moins un train.');
    return;
  }
  const trainsSelectionnes = selected.map(card => card.dataset.train);
  alert('Trains sélectionnés :\n' + trainsSelectionnes.join('\n'));
}

</script>

</body>
</html>
