<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Chat du Contrôleur</title>
  <style>
    body { font-family: Arial; background: #f0f0f0; padding: 20px; max-width: 600px; margin: auto; }
    .chatbox { background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    .chatlog { max-height: 300px; overflow-y: auto; margin-bottom: 10px; }
    .msg { padding: 10px; border-radius: 15px; margin: 5px 0; max-width: 80%; }
    .user { background: #dcf8c6; text-align: right; margin-left: auto; }
    .bot { background: #f1f0f0; text-align: left; margin-right: auto; }
    .chatinput { display: flex; gap: 10px; }
    .chatinput input { flex: 1; padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    .chatinput button { padding: 10px 20px; background: #004080; color: white; border: none; border-radius: 5px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="chatbox">
    <h2>💬 Le Contrôleur est en ligne</h2>
    <div class="chatlog" id="chatlog"></div>
    <div class="chatinput">
      <input type="text" id="userInput" placeholder="Pose ta question...">
      <button onclick="sendMessage()">Envoyer</button>
    </div>
  </div>

  <script>
    const phrasesBot = [
      "Pas de contrôle aujourd’hui, mais attention demain ! 😄",
      "On est à quai... ou presque.",
      "Ce train est assuré en bétaillère de luxe.",
      "Encore un PN en panne ? Quelle surprise !",
      "Bienvenue dans l’aventure des TER enchantés.",
      "On vous remboursera... peut-être.",
      "Si ce train est à l’heure, c’est un bug dans la matrice.",
      "Courage, vous y êtes presque !",
      "Un jour, ce train arrivera à l’heure. Peut-être pas aujourd'hui.",
      "Envie d’un café ? Pas dans ce train !"
    ];

    const reponsesMotsCle = {
      "bonjour": "Bonjour ! Contrôle des billets en cours 😊",
      "merci": "Avec plaisir ! On essaye de faire rouler le train ✌️",
      "retard": "Le retard est notre compagnon de route 🕒",
      "supprimé": "Train supprimé ? C’est la magie du rail ! 🎩",
      "grève": "Pas de grève aujourd’hui… pour l’instant 😅"
    };

    function sendMessage() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (!message) return;

      const log = document.getElementById("chatlog");
      const userMsg = document.createElement("div");
      userMsg.className = "msg user";
      userMsg.textContent = message;
      log.appendChild(userMsg);

      let reponse = null;
      for (const mot in reponsesMotsCle) {
        if (message.toLowerCase().includes(mot)) {
          reponse = reponsesMotsCle[mot];
          break;
        }
      }

      if (!reponse) {
        reponse = phrasesBot[Math.floor(Math.random() * phrasesBot.length)];
      }

      const botMsg = document.createElement("div");
      botMsg.className = "msg bot";
      botMsg.textContent = reponse;
      log.appendChild(botMsg);

      input.value = "";
      log.scrollTop = log.scrollHeight;
    }
  </script>
</body>
</html>
