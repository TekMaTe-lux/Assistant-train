<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations sur le Train</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .train-info {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .train-info h2 {
            color: #333;
        }
        .train-info ul {
            list-style-type: none;
            padding: 0;
        }
        .train-info ul li {
            margin: 8px 0;
        }
        .disruption {
            background-color: #ffd700;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .disruption p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="train-details"></div>
    </div>

    <script>
        // Exemple de données de réponse API (normalement ce serait une réponse d'une API réelle)
        const trainData = {
            "vehicle_journeys": [{
                "id": "vehicle_journey:SNCF:2025-05-13:88727:1187:Train",
                "name": "88727",
                "disruptions": [{
                    "severity": {
                        "name": "train canceled",
                        "effect": "NO_SERVICE",
                        "color": "#ff0000",
                        "priority": 42
                    },
                    "messages": [{
                        "text": "Dépannage de matériel"
                    }]
                }],
                "stop_times": [{
                    "arrival_time": "120900",
                    "departure_time": "120900",
                    "stop_point": {
                        "label": "Luxembourg"
                    }
                }, {
                    "arrival_time": "121200",
                    "departure_time": "121300",
                    "stop_point": {
                        "label": "Howald"
                    }
                }, {
                    "arrival_time": "122000",
                    "departure_time": "122100",
                    "stop_point": {
                        "label": "Bettembourg"
                    }
                }, {
                    "arrival_time": "123300",
                    "departure_time": "123400",
                    "stop_point": {
                        "label": "Thionville"
                    }
                }]
            }]
        };

        // Fonction pour formater l'heure au format HH:MM
        function formatTime(timeString) {
            const hours = timeString.substring(0, 2);
            const minutes = timeString.substring(2, 4);
            return `${hours}:${minutes}`;
        }

        // Fonction pour afficher les informations du train
        function displayTrainDetails(train) {
            let htmlContent = `
                <div class="train-info">
                    <h2>Informations pour le Train ${train.name}</h2>
                    <h3>Perturbations :</h3>
                    ${train.disruptions.length > 0 ? `
                        <div class="disruption">
                            <p><strong>Type :</strong> ${train.disruptions[0].severity.name}</p>
                            <p><strong>Cause :</strong> ${train.disruptions[0].messages[0].text}</p>
                        </div>` : 
                        `<p>Aucune perturbation</p>`}
                    
                    <h3>Arrêts :</h3>
                    <ul>`;
            // Affichage des arrêts
            train.stop_times.forEach(stop => {
                htmlContent += `
                    <li>Arrêt à ${stop.stop_point.label} à ${formatTime(stop.arrival_time)} (Départ: ${formatTime(stop.departure_time)})</li>`;
            });

            htmlContent += `</ul></div>`;

            document.getElementById('train-details').innerHTML = htmlContent;
        }

        // Appel de la fonction pour afficher les informations du train
        displayTrainDetails(trainData.vehicle_journeys[0]);
    </script>
</body>
</html>
