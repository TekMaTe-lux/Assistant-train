<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test JSON de retards</title>
</head>
<body>
  <h1>Test JSON de retards</h1>
  <div id="resultat" style="font-family: monospace;"></div>

  <script>
    (async () => {
      const url = "https://raw.githubusercontent.com/TekMaTe-lux/Assistant-train/main/Assistant-train/retards_nancymetzlux.json";
      const div = document.getElementById("resultat");

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error(`Erreur HTTP : ${response.status}`);
        
        const retards = await response.json();

        div.innerHTML += `<p><strong>Donn√©es r√©cup√©r√©es avec succ√®s ‚úÖ</strong></p>`;

        if (retards["88783"]) {
          div.innerHTML += `<p>üöÑ <strong>Retards du train 88783</strong> :</p><pre>${JSON.stringify(retards["88783"], null, 2)}</pre>`;
        } else {
          div.innerHTML += `<p>‚ÑπÔ∏è Aucun retard GTFS-RT pour le train 88783</p>`;
        }

      } catch (err) {
        div.innerHTML += `<p style="color:red;">‚ùå Erreur lors du chargement du fichier JSON : ${err}</p>`;
        console.error("Erreur de chargement :", err);
      }
    })();
  </script>
</body>
</html>
