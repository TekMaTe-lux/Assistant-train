<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prochains trains Nancy - Metz</title>
</head>
<body>
  <h1>Prochains trains entre Nancy et Metz</h1>
  <div id="train-info">
    <button onclick="fetchTrains()">Voir les trains</button>
    <ul id="train-list"></ul>
  </div>

  <script>
    // URL de l'API Navitia avec les bons codes de gare
    const apiUrl = "https://api.navitia.io/v1/coverage/sncf/journeys?from=stop_area%3ASNCF%3A87141002&to=stop_area%3ASNCF%3A87192039";

    // Fonction pour récupérer les trains entre Nancy et Metz
    function fetchTrains() {
      // Appel à l'API Navitia
      fetch(apiUrl, {
        headers: {
          'Authorization': 'Bearer 242fac11-6d98-45fb-93df-28174d362447' // Remplace par ta clé API
        }
      })
      .then(response => response.json()) // On parse la réponse JSON
      .then(data => {
        const trains = data.journeys; // Les trajets retournés par l'API
        const trainList = document.getElementById("train-list");

        // Effacer les anciens résultats
        trainList.innerHTML = "";

        if (trains && trains.length > 0) {
          trains.forEach(train => {
            // Créer un élément de liste pour chaque train
            const listItem = document.createElement("li");
            listItem.textContent = `${train.from.name} ➔ ${train.to.name} à ${train.departure_date_time}`;
            trainList.appendChild(listItem); // Ajouter l'élément à la liste
          });
        } else {
          // Si aucun train n'est trouvé
          trainList.innerHTML = "Aucun train trouvé pour ce trajet.";
        }
      })
      .catch(error => {
        console.error("Erreur lors de la récupération des trains:", error);
        alert("Erreur lors de la récupération des informations. Essayez de nouveau.");
      });
    }
  </script>
</body>
</html>
