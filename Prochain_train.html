<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prochain Train Nancy vers Metz</title>
</head>
<body>
    <h1>Prochains trains de Nancy vers Metz</h1>

    <!-- Bouton pour actualiser les horaires -->
    <button id="actualiserButton">Actualiser</button>

    <!-- Div où les résultats seront affichés -->
    <div id="trainResults">
        <p>Les horaires des trains apparaîtront ici.</p>
    </div>

    <script>
        // Fonction pour récupérer et afficher les horaires de train entre Nancy et Metz
        function fetchTrainData() {
            const url = `https://api.sncf.com/v1/coverage/sncf/journeys?from=stop_area:SNCF:OCE:SA:87141002&to=stop_area:SNCF:OCE:SA:87141120&date_time=2025-04-25T14:00:00&key=242fac11-6d98-45fb-93df-28174d362447`;
            
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    // Effacer les anciens résultats
                    document.getElementById('trainResults').innerHTML = "";

                    if (data.journeys && data.journeys.length > 0) {
                        data.journeys.forEach(train => {
                            const trainInfo = document.createElement('p');
                            trainInfo.innerHTML = `Train de ${train.from.stop_name} à ${train.to.stop_name} à ${train.departure_date_time}`;
                            document.getElementById('trainResults').appendChild(trainInfo);
                        });
                    } else {
                        document.getElementById('trainResults').innerHTML = "<p>Aucun train trouvé pour l'instant.</p>";
                    }
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération des données:', error);
                    document.getElementById('trainResults').innerHTML = "<p>Erreur lors de la récupération des données.</p>";
                });
        }

        // Appel de la fonction lors du chargement de la page
        window.onload = fetchTrainData;

        // Rafraîchir les données lorsque l'on clique sur le bouton "Actualiser"
        document.getElementById('actualiserButton').onclick = fetchTrainData;
    </script>
</body>
</html>
