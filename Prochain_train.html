<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Prochain Train Nancy → Luxembourg</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      text-align: center;
    }
    button {
      margin-bottom: 20px;
      padding: 10px 20px;
      font-size: 16px;
    }
    #result {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>

<h1>Prochain Train Nancy → Luxembourg</h1>

<button onclick="rechercherTrain()">Afficher le prochain train</button>

<div id="result">Clique sur le bouton pour voir le prochain train !</div>

<script>
  function rechercherTrain() {
    const resultDiv = document.getElementById('result');

    fetch('https://api.navitia.io/v1/coverage/sncf/journeys?from=stop_area:SNCF:87192039&to=stop_area:SNCF:8200028', {
      headers: {
        'Authorization': '242fac11-6d98-45fb-93df-28174d362447'
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.journeys && data.journeys.length > 0) {
        const journey = data.journeys[0];
        const departureTime = journey.departure_date_time;
        const heure = departureTime.substring(9, 11);
        const minutes = departureTime.substring(11, 13);

        resultDiv.innerHTML = `Prochain train à ${heure}h${minutes} au départ de Nancy vers Luxembourg.`;
      } else {
        resultDiv.innerHTML = "Aucun train trouvé.";
      }
    })
    .catch(error => {
      console.error('Erreur:', error);
      resultDiv.innerHTML = "Erreur lors de la récupération des données.";
    });
  }
</script>

</body>
</html>
